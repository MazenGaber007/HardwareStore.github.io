<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Comparing Any product you would like">
    <title>Compare Products - Hardware Store</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="top"></div>

<header>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="shop.html">Shop</a></li>
            <li><a href="cart.html">Cart <span id="cart-count" class="cart-badge" style="display: none;">0</span></a></li>
            <li><a href="compare.html">Compare</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </nav>
</header>

<div class="container">
    <h1>Compare Products</h1>
    <p style="text-align: center; color: #b0b0b0; margin-bottom: 2rem;">Select up to 4 products to compare their features and specifications</p>
</div>

<div class="Catalog" id="productCatalog">
    <!-- سيتم ملء المنتجات بواسطة JavaScript -->
</div>

<div class="container">
    <div id="ComparisonOutput" style="display: none;">
        <h2>Comparison Table</h2>
        <div id="TableContainer"></div>
    </div>
</div>

<div class="CompareWidget" id="CompareWidget">
    <div class="WidgetHeader">
        <span>⚖ Product Comparison (<span id="count">0</span>/4)</span>
    </div>

    <div class="SlotsContainer">
        <div class="SlotEmpty" id="Slot0">
            <div class="ContentField" style="display: none;">
                <button class="RemoveButton" onclick="RemoveProduct(0)">×</button>
                <img src="" class="P-Img" alt="Product">
                <span class="P-Name">Product Name</span>
            </div>
            <div class="ContentEmpty">
                <span>+</span>
                <p>Add Product</p>
            </div>
        </div>

        <div class="SlotEmpty" id="Slot1">
            <div class="ContentField" style="display: none;">
                <button class="RemoveButton" onclick="RemoveProduct(1)">×</button>
                <img src="" class="P-Img" alt="Product">
                <span class="P-Name">Product Name</span>
            </div>
            <div class="ContentEmpty">
                <span>+</span>
                <p>Add Product</p>
            </div>
        </div>

        <div class="SlotEmpty" id="Slot2">
            <div class="ContentField" style="display: none;">
                <button class="RemoveButton" onclick="RemoveProduct(2)">×</button>
                <img src="" class="P-Img" alt="Product">
                <span class="P-Name">Product Name</span>
            </div>
            <div class="ContentEmpty">
                <span>+</span>
                <p>Add Product</p>
            </div>
        </div>

        <div class="SlotEmpty" id="Slot3">
            <div class="ContentField" style="display: none;">
                <button class="RemoveButton" onclick="RemoveProduct(3)">×</button>
                <img src="" class="P-Img" alt="Product">
                <span class="P-Name">Product Name</span>
            </div>
            <div class="ContentEmpty">
                <span>+</span>
                <p>Add Product</p>
            </div>
        </div>
    </div>
</div>

<footer>
    <div class="footer-content">
        <p>&copy; 2024 Hardware Store. All rights reserved.</p>
    </div>
</footer>

<script>
// بيانات المنتجات
const products = {
    'lenovo': {
        id: 'lenovo',
        name: 'HP Victus 16',
        price: 63999,
        image: '_HP-Victus-16-r1055ne-Gaming-Laptop.jpg',
        specs: {
            'Processor': 'Intel Core i5',
            'RAM': '8GB DDR4',
            'Storage': '512GB SSD',
            'Display': '15.6" Full HD',
            'Battery': 'Up to 8 hours',
            'Weight': '1.8 kg'
        }
    },
    'macbook': {
        id: 'macbook',
        name: 'ASUS Expert Book B1',
        price: 24999,
        image: 'dlcdnwebimgs.asus.png',
        specs: {
            'Processor': 'Apple M1',
            'RAM': '8GB Unified Memory',
            'Storage': '256GB SSD',
            'Display': '13.3" Retina',
            'Battery': 'Up to 20 hours',
            'Weight': '1.4 kg'
        }
    },
    'samsung': {
        id: 'samsung',
        name: 'Lenovo IdeaPad Slim 3',
        price: 304999,
        image: 'lenovoidea.png',
        specs: {
            'Processor': 'Intel Core i5',
            'RAM': '8GB',
            'Storage': '256GB SSD',
            'Display': '15.6" Full HD',
            'Battery': 'Up to 10 hours',
            'Weight': '1.6 kg'
        }
    },
    'hp': {
        id: 'hp',
        name: 'ASUS ZenBook S16',
        price: 94999,
        image: 'zenbook_s_16__um5606wa_product_photo_3w_scandinavian_white_03.png',
        specs: {
            'Processor': 'Intel Core i3',
            'RAM': '8GB',
            'Storage': '256GB SSD',
            'Display': '14" HD',
            'Battery': 'Up to 7 hours',
            'Weight': '1.7 kg'
        }
    }
};

// مصفوفة المنتجات المضافة للمقارنة
let compareList = [];

// تحميل البيانات من localStorage عند فتح الصفحة
function loadCompareList() {
    const saved = localStorage.getItem('compareList');
    if (saved) {
        compareList = JSON.parse(saved);
        updateCompareWidget();
        updateComparisonTable();
    }
}

// حفظ البيانات في localStorage
function saveCompareList() {
    localStorage.setItem('compareList', JSON.stringify(compareList));
}

// عرض المنتجات في الصفحة
function renderProducts() {
    const catalog = document.getElementById('productCatalog');
    catalog.innerHTML = '';
    
    Object.keys(products).forEach(productId => {
        const product = products[productId];
        const isInCompare = compareList.some(p => p.id === productId);
        
        const card = document.createElement('div');
        card.className = 'ProductCard';
        card.innerHTML = `
            <img src="${product.image}" alt="${product.name}">
            <h3>${product.name}</h3>
            <p>$${product.price}</p>
            <button class="add-btn" onclick="addToCompare('${productId}')" ${isInCompare ? 'disabled style="opacity: 0.5; cursor: not-allowed;"' : ''}>
                ${isInCompare ? 'Already Added' : 'Add To Compare'}
            </button>
        `;
        catalog.appendChild(card);
    });
}

// إضافة منتج للمقارنة
function addToCompare(productId) {
    if (compareList.length >= 4) {
        alert('You can compare up to 4 products only!');
        return;
    }
    
    if (compareList.some(p => p.id === productId)) {
        alert('This product is already in the comparison list!');
        return;
    }
    
    const product = products[productId];
    if (!product) return;
    
    compareList.push(product);
    saveCompareList();
    updateCompareWidget();
    updateComparisonTable();
    renderProducts();
}

// إزالة منتج من المقارنة
function RemoveProduct(slotIndex) {
    if (compareList[slotIndex]) {
        compareList.splice(slotIndex, 1);
        saveCompareList();
        updateCompareWidget();
        updateComparisonTable();
        renderProducts();
    }
}

// تحديث الـ Compare Widget
function updateCompareWidget() {
    const countElement = document.getElementById('count');
    countElement.textContent = compareList.length;
    
    // تحديث كل slot
    for (let i = 0; i < 4; i++) {
        const slot = document.getElementById(`Slot${i}`);
        const contentField = slot.querySelector('.ContentField');
        const contentEmpty = slot.querySelector('.ContentEmpty');
        
        if (compareList[i]) {
            const product = compareList[i];
            contentField.style.display = 'block';
            contentEmpty.style.display = 'none';
            contentField.querySelector('.P-Img').src = product.image;
            contentField.querySelector('.P-Name').textContent = product.name;
        } else {
            contentField.style.display = 'none';
            contentEmpty.style.display = 'flex';
        }
    }
}

// تحديث جدول المقارنة
function updateComparisonTable() {
    const outputDiv = document.getElementById('ComparisonOutput');
    const tableContainer = document.getElementById('TableContainer');
    
    if (compareList.length < 2) {
        outputDiv.style.display = 'none';
        return;
    }
    
    outputDiv.style.display = 'block';
    
    // الحصول على جميع المفاتيح من جميع المنتجات
    const allSpecs = new Set();
    compareList.forEach(product => {
        Object.keys(product.specs).forEach(key => allSpecs.add(key));
    });
    
    // إنشاء الجدول
    let tableHTML = '<table style="width: 100%; border-collapse: collapse; color: #e0e0e0;">';
    
    // رأس الجدول
    tableHTML += '<thead><tr style="background: #1a1a1a;">';
    tableHTML += '<th style="padding: 1rem; text-align: left; border: 1px solid rgba(139, 92, 246, 0.3); color: #a78bfa;">Feature</th>';
    compareList.forEach(product => {
        tableHTML += `<th style="padding: 1rem; text-align: center; border: 1px solid rgba(139, 92, 246, 0.3); color: #a78bfa;">${product.name}</th>`;
    });
    tableHTML += '</tr></thead>';
    
    // صف السعر
    tableHTML += '<tbody><tr style="background: #0a0a0a;">';
    tableHTML += '<td style="padding: 1rem; border: 1px solid rgba(139, 92, 246, 0.3); font-weight: bold;">Price</td>';
    compareList.forEach(product => {
        tableHTML += `<td style="padding: 1rem; text-align: center; border: 1px solid rgba(139, 92, 246, 0.3);">$${product.price}</td>`;
    });
    tableHTML += '</tr>';
    
    // صفوف المواصفات
    Array.from(allSpecs).forEach(specKey => {
        tableHTML += '<tr style="background: #0a0a0a;">';
        tableHTML += `<td style="padding: 1rem; border: 1px solid rgba(139, 92, 246, 0.3); font-weight: bold;">${specKey}</td>`;
        compareList.forEach(product => {
            const value = product.specs[specKey] || 'N/A';
            tableHTML += `<td style="padding: 1rem; text-align: center; border: 1px solid rgba(139, 92, 246, 0.3);">${value}</td>`;
        });
        tableHTML += '</tr>';
    });
    
    tableHTML += '</tbody></table>';
    
    tableContainer.innerHTML = tableHTML;
}

// تحديث عداد السلة
function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    
    const cartCountElement = document.getElementById('cart-count');
    if (cartCountElement) {
        if (totalItems > 0) {
            cartCountElement.textContent = totalItems;
            cartCountElement.style.display = 'inline-block';
        } else {
            cartCountElement.style.display = 'none';
        }
    }
}

// تهيئة الصفحة عند التحميل
document.addEventListener('DOMContentLoaded', function() {
    loadCompareList();
    renderProducts();
    updateCartCount();
});
</script>
<a href="#top" class="scroll-top">⬆</a>

</body>
</html>
