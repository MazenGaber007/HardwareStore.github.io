<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="top"></div>


<header>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="shop.html">Shop</a></li>
            <li><a href="cart.html">Cart <span id="cart-count" class="cart-badge" style="display: none;">0</span></a></li>
            <li><a href="compare.html">Compare</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </nav>
</header>


<div class="d1">
    <h1>Shopping cart</h1>
</div>

<div class="d2">
    <h5>Items in your cart</h5>
</div>

<div class="container">
    <!-- قائمة المنتجات في السلة -->
    <div id="cart-items"></div>

    <!-- المجموع النهائي وزر تأكيد الشراء -->
    <div class="d4">
        <hr>
        <h3 id="cart-total">Total: 0$</h3>
        <input type="button" value="Check Out">
    </div>
</div>

<script>
// قراءة السلة من localStorage
function getCart() {
    return JSON.parse(localStorage.getItem('cart')) || [];
}

// حفظ السلة في localStorage
function saveCart(cart) {
    localStorage.setItem('cart', JSON.stringify(cart));
}

// تحديث عدد العناصر فوق زر Cart
function updateCartCount() {
    const cart = getCart();
    const totalItems = cart.reduce(function (sum, item) {
        return sum + item.quantity;
    }, 0);

    const cartCountElement = document.getElementById('cart-count');
    if (cartCountElement) {
        if (totalItems > 0) {
            cartCountElement.textContent = totalItems;
            cartCountElement.style.display = 'inline-block';
        } else {
            cartCountElement.style.display = 'none';
        }
    }
}

// عرض محتوى السلة في الصفحة
function renderCart() {
    const cart = getCart();
    const cartItemsContainer = document.getElementById('cart-items');
    const cartTotalElement = document.getElementById('cart-total');

    cartItemsContainer.innerHTML = '';

    if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p>Your cart is empty.</p>';
        cartTotalElement.textContent = 'Total: 0$';
        updateCartCount();
        return;
    }

    let totalPrice = 0;

    cart.forEach(function (item, index) {
        const itemTotal = item.price * item.quantity;
        totalPrice += itemTotal;

        const itemDiv = document.createElement('div');
        itemDiv.className = 'cart-item';
        itemDiv.style.display = 'flex';
        itemDiv.style.alignItems = 'center';
        itemDiv.style.justifyContent = 'space-between';
        itemDiv.style.margin = '10px 0';
        itemDiv.style.padding = '10px';
        itemDiv.style.borderBottom = '1px solid #444';

        itemDiv.innerHTML = `
            <div style="display:flex; align-items:center; gap:10px;">
                <img src="${item.image}" alt="${item.name}" style="width:70px; height:70px; object-fit:cover; border-radius:8px;">
                <div>
                    <h4 style="margin:0;">${item.name}</h4>
                    <p style="margin:5px 0;">Price: $${item.price}</p>
                </div>
            </div>
            <div style="display:flex; align-items:center; gap:10px;">
                <button onclick="changeQuantity(${index}, -1)">-</button>
                <span>Qty: ${item.quantity}</span>
                <button onclick="changeQuantity(${index}, 1)">+</button>
                <span style="min-width:80px; text-align:right;">$${itemTotal}</span>
                <button onclick="removeItem(${index})">Remove</button>
            </div>
        `;

        cartItemsContainer.appendChild(itemDiv);
    });

    cartTotalElement.textContent = 'Total: ' + totalPrice + '$';
    updateCartCount();
}

// تغيير الكمية لمنتج معيّن
function changeQuantity(index, delta) {
    const cart = getCart();
    if (!cart[index]) return;

    cart[index].quantity += delta;
    if (cart[index].quantity <= 0) {
        cart.splice(index, 1);
    }

    saveCart(cart);
    renderCart();
}

// حذف منتج من السلة
function removeItem(index) {
    const cart = getCart();
    if (!cart[index]) return;

    cart.splice(index, 1);
    saveCart(cart);
    renderCart();
}

// تحميل السلة عند فتح الصفحة
document.addEventListener('DOMContentLoaded', function () {
    renderCart();
});
</script>
<a href="#top" class="scroll-top">⬆</a>

</body>
</html>
